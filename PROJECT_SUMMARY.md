# é¡¹ç›®å®æ–½æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®æ¶æ„ (Astro + TypeScript)

åŸºäº Astro 5.x æ„å»ºçš„ç°ä»£åŒ–é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œæä¾›ï¼š
- ç»„ä»¶åŒ–æ¶æ„
- TypeScript ä¸¥æ ¼æ¨¡å¼
- Cloudflare Pages é€‚é…å™¨
- é›¶è¿è¡Œæ—¶ JavaScript

### 2. æ ¸å¿ƒç»„ä»¶

#### é…ç½®ç³»ç»Ÿ
- **ä½ç½®**: `src/config/site.config.ts`
- **åŠŸèƒ½**: é›†ä¸­ç®¡ç†æ‰€æœ‰æ–‡æœ¬ã€å›¾ç‰‡è·¯å¾„å’Œé¡µé¢é…ç½®
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰

#### å¸ƒå±€ç»„ä»¶
- `BaseLayout.astro`: åŸºç¡€ HTML ç»“æ„å’Œå…¨å±€æ ·å¼
- `ErrorPage.astro`: å¯å¤ç”¨çš„é”™è¯¯é¡µé¢ç»„ä»¶

#### æ ·å¼ç³»ç»Ÿ
- `error-page.css`: å®Œæ•´ä¿ç•™åŸå§‹æ ·å¼
- å“åº”å¼è®¾è®¡ (ç§»åŠ¨ç«¯/å¹³æ¿/æ¡Œé¢)
- CSS å˜é‡æ”¯æŒèƒŒæ™¯å›¾ç‰‡åŠ¨æ€é…ç½®

### 3. é¡µé¢è·¯ç”±

æ‰€æœ‰é”™è¯¯é¡µé¢å‡å·²å®ç°ï¼š

| é¡µé¢æ–‡ä»¶ | è¾“å‡ºè·¯å¾„ | ç”¨é€” |
|---------|---------|------|
| `src/pages/index.astro` | `/index.html` | é¢„è§ˆæ‰€æœ‰é”™è¯¯é¡µé¢ |
| `src/pages/waf-block.astro` | `/waf-block.html` | WAF æ‹¦æˆª |
| `src/pages/ip-block.astro` | `/ip-block.html` | IP å°ç¦ |
| `src/pages/under-attack.astro` | `/under-attack.html` | æ”»å‡»æ¨¡å¼ |
| `src/pages/captcha.astro` | `/captcha.html` | éªŒè¯ç  |
| `src/pages/100x.astro` | `/100x.html` | å®¢æˆ·ç«¯é”™è¯¯ |
| `src/pages/5xx.astro` | `/5xx.html` | æœåŠ¡å™¨é”™è¯¯ |

### 4. é™æ€èµ„æº

- èƒŒæ™¯å›¾ç‰‡å·²å¤åˆ¶åˆ° `public/` ç›®å½•
- è‡ªåŠ¨åŒ…å«åœ¨æ„å»ºè¾“å‡ºä¸­
- æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶çµæ´»æŒ‡å®šè·¯å¾„

### 5. éƒ¨ç½²é…ç½®

#### Cloudflare Pages
- `astro.config.mjs`: Astro + Cloudflare adapter é…ç½®
- `wrangler.toml`: Cloudflare Workers é…ç½®
- æ„å»ºå‘½ä»¤: `npm run build`
- è¾“å‡ºç›®å½•: `dist/`

### 6. æ–‡æ¡£

- `README.md`: å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£
- `USAGE.md`: è¯¦ç»†çš„ä½¿ç”¨å’Œé…ç½®æŒ‡å—
- å†…è”ä»£ç æ³¨é‡Š

## ğŸ“Š é¡¹ç›®ç‰¹ç‚¹

### ä¸åŸé¡¹ç›®å¯¹æ¯”

| ç‰¹æ€§ | åŸé¡¹ç›® | æ–°é¡¹ç›® (Astro) |
|-----|--------|---------------|
| æ¶æ„ | é™æ€ HTML | Astro ç»„ä»¶åŒ– |
| é…ç½® | ç¡¬ç¼–ç  | é…ç½®æ–‡ä»¶é©±åŠ¨ |
| æ ·å¼ | å†…è” CSS | ç‹¬ç«‹ CSS æ–‡ä»¶ |
| ç»´æŠ¤æ€§ | éœ€ä¿®æ”¹æ¯ä¸ªæ–‡ä»¶ | ä¿®æ”¹é…ç½®å³å¯ |
| ç±»å‹å®‰å…¨ | æ—  | TypeScript ä¸¥æ ¼æ¨¡å¼ |
| æ‰©å±•æ€§ | å›°éš¾ | ç»„ä»¶åŒ–æ˜“æ‰©å±• |
| æ„å»ºä¼˜åŒ– | æ—  | Vite + Astro ä¼˜åŒ– |

### æŠ€æœ¯ä¼˜åŠ¿

1. **ç»„ä»¶å¤ç”¨**: æ‰€æœ‰é”™è¯¯é¡µé¢å…±äº«åŒä¸€ä¸ªç»„ä»¶
2. **é…ç½®é©±åŠ¨**: ä¿®æ”¹æ–‡æœ¬æ— éœ€è§¦ç¢°ä»£ç é€»è¾‘
3. **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶æ•è·é…ç½®é”™è¯¯
4. **æ„å»ºä¼˜åŒ–**: CSS å‹ç¼©ã€èµ„æºä¼˜åŒ–
5. **å¼€å‘ä½“éªŒ**: çƒ­é‡è½½ã€ç±»å‹æç¤º
6. **éƒ¨ç½²ç®€å•**: ä¸€é”®éƒ¨ç½²åˆ° Cloudflare Pages

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### å¼€å‘

```bash
npm install      # å®‰è£…ä¾èµ–
npm run dev      # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

è®¿é—® http://localhost:4321 æŸ¥çœ‹æ‰€æœ‰é¡µé¢

### é…ç½®

ç¼–è¾‘ `src/config/site.config.ts` ä¿®æ”¹ï¼š
- ç«™ç‚¹åŸºæœ¬ä¿¡æ¯
- é”™è¯¯é¡µé¢æ–‡æœ¬
- èƒŒæ™¯å›¾ç‰‡è·¯å¾„

### æ„å»º

```bash
npm run build    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview  # æœ¬åœ°é¢„è§ˆ
```

### éƒ¨ç½²

**æ–¹æ³• 1**: æ¨é€åˆ° GitHubï¼Œåœ¨ Cloudflare Dashboard è¿æ¥ä»“åº“

**æ–¹æ³• 2**: ä½¿ç”¨ Wrangler CLI
```bash
wrangler pages deploy dist
```

## ğŸ“ å…³é”®æ–‡ä»¶è¯´æ˜

```
cloudflare-waf-pages/
â”œâ”€â”€ src/config/site.config.ts    # â­ ä¸»é…ç½®æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰
â”œâ”€â”€ src/components/ErrorPage.astro  # é”™è¯¯é¡µé¢ç»„ä»¶
â”œâ”€â”€ src/layouts/BaseLayout.astro    # åŸºç¡€å¸ƒå±€
â”œâ”€â”€ src/styles/error-page.css       # å…¨å±€æ ·å¼
â”œâ”€â”€ public/                         # é™æ€èµ„æºï¼ˆå›¾ç‰‡ç­‰ï¼‰
â”œâ”€â”€ astro.config.mjs               # Astro é…ç½®
â”œâ”€â”€ wrangler.toml                  # Cloudflare é…ç½®
â”œâ”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ USAGE.md                       # ä½¿ç”¨æŒ‡å—
```

## ğŸ”§ ç»´æŠ¤å»ºè®®

### æ—¥å¸¸ä¿®æ”¹

1. **ä¿®æ”¹æ–‡æœ¬**: ç¼–è¾‘ `src/config/site.config.ts`
2. **æ›´æ¢å›¾ç‰‡**: æ›¿æ¢ `public/` ç›®å½•ä¸‹çš„å›¾ç‰‡
3. **è°ƒæ•´æ ·å¼**: ç¼–è¾‘ `src/styles/error-page.css`

### æ·»åŠ æ–°é¡µé¢

1. åœ¨é…ç½®æ–‡ä»¶æ·»åŠ é¡µé¢é…ç½®
2. åˆ›å»ºå¯¹åº”çš„ `.astro` é¡µé¢æ–‡ä»¶
3. é‡æ–°æ„å»ºéƒ¨ç½²

### æ›´æ–° Cloudflare é…ç½®

éƒ¨ç½²å®Œæˆåï¼Œåœ¨ Cloudflare Dashboard çš„ **Custom Pages** è®¾ç½®ä¸­é…ç½®é”™è¯¯é¡µé¢ URLã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **HTML åç¼€**: Astro æ„å»ºè¾“å‡ºçš„æ˜¯ `.html` æ–‡ä»¶ï¼ŒCloudflare é…ç½®æ—¶éœ€è¦åŒ…å«å®Œæ•´è·¯å¾„ï¼ˆå¦‚ `/waf-block.html`ï¼‰

2. **èƒŒæ™¯å›¾ç‰‡**: ç¡®ä¿ `public/` ç›®å½•ä¸‹æœ‰ `1.webp` å’Œ `2.webp`ï¼Œæˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ­£ç¡®è·¯å¾„

3. **Cloudflare å ä½ç¬¦**: `::RAY_ID::`ã€`::CLIENT_IP::` ç­‰å ä½ç¬¦ä¼šè¢« Cloudflare è‡ªåŠ¨æ›¿æ¢ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†

4. **Node.js ç‰ˆæœ¬**: éœ€è¦ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬

## ğŸ“ˆ æœªæ¥æ‰©å±•å»ºè®®

- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒï¼ˆi18nï¼‰
- [ ] é›†æˆå›¾ç‰‡ä¼˜åŒ–å·¥å…·
- [ ] æ·»åŠ æš—è‰²ä¸»é¢˜åˆ‡æ¢
- [ ] å®ç°å¤šä¸»é¢˜é…ç½®
- [ ] æ·»åŠ åŠ¨ç”»æ•ˆæœ
- [ ] é›†æˆ Tailwind CSSï¼ˆå¯é€‰ï¼‰

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

âœ… æ‰€æœ‰ 6 ä¸ªé”™è¯¯é¡µé¢æ­£å¸¸æ„å»º
âœ… æ ·å¼ 100% ä¿ç•™åŸå§‹æ•ˆæœ
âœ… é…ç½®æ–‡ä»¶é©±åŠ¨ï¼Œæ˜“äºç»´æŠ¤
âœ… TypeScript ç±»å‹å®‰å…¨
âœ… æ„å»ºäº§ç‰©ä¼˜åŒ–ï¼ˆå‹ç¼©ã€èµ„æºä¼˜åŒ–ï¼‰
âœ… æ”¯æŒ Cloudflare Pages ä¸€é”®éƒ¨ç½²
âœ… å®Œæ•´æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

---

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2025-11-18
**æŠ€æœ¯æ ˆ**: Astro 5.x + TypeScript + Cloudflare Pages
**æ„å»ºçŠ¶æ€**: âœ… æˆåŠŸ
